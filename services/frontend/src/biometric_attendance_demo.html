<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Demo - Verificaci√≥n Biom√©trica de Asistencia</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; }
        .demo-container { background: rgba(255,255,255,0.95); border-radius: 20px; margin: 20px; padding: 30px; }
        .demo-card { background: white; border-radius: 15px; padding: 20px; margin: 10px 0; box-shadow: 0 4px 15px rgba(0,0,0,0.1); }
        .status-indicator { width: 12px; height: 12px; border-radius: 50%; display: inline-block; margin-right: 8px; }
        .status-online { background: #28a745; }
        .status-offline { background: #dc3545; }
        .status-warning { background: #ffc107; }
    </style>
</head>
<body>
    <div class="container-fluid">
        <div class="demo-container">
            <div class="row">
                <div class="col-12 text-center mb-4">
                    <h1>üéØ Demo - Verificaci√≥n Biom√©trica de Asistencia</h1>
                    <p class="text-muted">Sistema completo de control de asistencia con IA</p>
                </div>
            </div>

            <!-- Estado del Sistema -->
            <div class="row mb-4">
                <div class="col-md-4">
                    <div class="demo-card">
                        <h5><span class="status-indicator status-online"></span>Servicio Python</h5>
                        <p class="mb-1">Estado: <strong class="text-success">Online</strong></p>
                        <p class="mb-1">Puerto: <code>8000</code></p>
                        <small class="text-muted">FastAPI con servicios biom√©tricos</small>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="demo-card">
                        <h5><span class="status-indicator status-online"></span>Base de Datos</h5>
                        <p class="mb-1">Estado: <strong class="text-success">Conectada</strong></p>
                        <p class="mb-1">Tablas: <code>3 activas</code></p>
                        <small class="text-muted">MySQL con datos biom√©tricos</small>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="demo-card">
                        <h5><span class="status-indicator status-warning"></span>Dispositivos</h5>
                        <p class="mb-1">Estado: <strong class="text-warning">Simulados</strong></p>
                        <p class="mb-1">C√°mara: <code>WebRTC</code></p>
                        <small class="text-muted">Sensores biom√©tricos virtuales</small>
                    </div>
                </div>
            </div>

            <!-- Funcionalidades -->
            <div class="row mb-4">
                <div class="col-12">
                    <div class="demo-card">
                        <h4 class="mb-3">üöÄ Funcionalidades del Sistema</h4>
                        <div class="row">
                            <div class="col-md-4">
                                <h6>üì∏ Reconocimiento Facial</h6>
                                <ul class="list-unstyled small">
                                    <li>‚úÖ Detecci√≥n autom√°tica de rostros</li>
                                    <li>‚úÖ Comparaci√≥n con base de datos</li>
                                    <li>‚úÖ Umbral de confianza configurable</li>
                                    <li>‚úÖ Procesamiento en tiempo real</li>
                                </ul>
                            </div>
                            <div class="col-md-4">
                                <h6>üëÜ Huella Dactilar</h6>
                                <ul class="list-unstyled small">
                                    <li>‚úÖ Simulaci√≥n de lector biom√©trico</li>
                                    <li>‚úÖ Verificaci√≥n de plantillas</li>
                                    <li>‚úÖ Soporte multi-dedo</li>
                                    <li>‚úÖ Calidad de imagen</li>
                                </ul>
                            </div>
                            <div class="col-md-4">
                                <h6>üé´ Tarjeta RFID</h6>
                                <ul class="list-unstyled small">
                                    <li>‚úÖ Lectura de UID</li>
                                    <li>‚úÖ Verificaci√≥n de tarjetas</li>
                                    <li>‚úÖ Soporte m√∫ltiples formatos</li>
                                    <li>‚úÖ Anti-colisi√≥n</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Instrucciones de Uso -->
            <div class="row mb-4">
                <div class="col-12">
                    <div class="demo-card">
                        <h4 class="mb-3">üìã C√≥mo Usar el Sistema</h4>
                        <div class="row">
                            <div class="col-md-6">
                                <h6>1Ô∏è‚É£ Preparaci√≥n</h6>
                                <ol class="small">
                                    <li>Aseg√∫rate de que el servicio Python est√© ejecut√°ndose</li>
                                    <li>Verifica la conexi√≥n a la base de datos</li>
                                    <li>Confirma que hay empleados con datos biom√©tricos</li>
                                    <li>Permite acceso a la c√°mara del navegador</li>
                                </ol>

                                <h6 class="mt-3">2Ô∏è‚É£ Verificaci√≥n</h6>
                                <ol class="small">
                                    <li>Selecciona un empleado de la lista</li>
                                    <li>Elige el m√©todo de verificaci√≥n deseado</li>
                                    <li>Sigue las instrucciones en pantalla</li>
                                    <li>Espera el resultado de la verificaci√≥n</li>
                                </ol>
                            </div>
                            <div class="col-md-6">
                                <h6>3Ô∏è‚É£ M√©todos Disponibles</h6>
                                <div class="mb-2">
                                    <strong>Facial:</strong> Posiciona tu rostro frente a la c√°mara
                                </div>
                                <div class="mb-2">
                                    <strong>Huella:</strong> Simula colocar el dedo en el lector
                                </div>
                                <div class="mb-2">
                                    <strong>RFID:</strong> Simula acercar la tarjeta al lector
                                </div>

                                <h6 class="mt-3">4Ô∏è‚É£ Resultados</h6>
                                <div class="mb-2">
                                    <span class="badge bg-success">‚úÖ √âxito:</span> Asistencia registrada
                                </div>
                                <div class="mb-2">
                                    <span class="badge bg-danger">‚ùå Error:</span> Verificaci√≥n fallida
                                </div>
                                <div class="mb-2">
                                    <span class="badge bg-warning">‚è≥ Pendiente:</span> Procesando...
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Botones de Acci√≥n -->
            <div class="row">
                <div class="col-12 text-center">
                    <div class="demo-card">
                        <h4 class="mb-3">üéÆ Acciones Disponibles</h4>
                        <div class="row">
                            <div class="col-md-4 mb-3">
                                <a href="biometric_attendance_verification.html" class="btn btn-primary btn-lg w-100">
                                    <i class="fas fa-play-circle me-2"></i>
                                    Iniciar Sistema Completo
                                </a>
                                <small class="text-muted d-block mt-1">Interfaz completa de verificaci√≥n</small>
                            </div>
                            <div class="col-md-4 mb-3">
                                <button onclick="testAPI()" class="btn btn-info btn-lg w-100">
                                    <i class="fas fa-flask me-2"></i>
                                    Probar API
                                </button>
                                <small class="text-muted d-block mt-1">Verificar conectividad de servicios</small>
                            </div>
                            <div class="col-md-4 mb-3">
                                <a href="BIOMETRIC_ATTENDANCE_README.md" class="btn btn-secondary btn-lg w-100">
                                    <i class="fas fa-book me-2"></i>
                                    Documentaci√≥n
                                </a>
                                <small class="text-muted d-block mt-1">Manual completo del sistema</small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Informaci√≥n T√©cnica -->
            <div class="row mt-4">
                <div class="col-12">
                    <div class="demo-card">
                        <h4 class="mb-3">‚öôÔ∏è Informaci√≥n T√©cnica</h4>
                        <div class="row">
                            <div class="col-md-6">
                                <h6>Backend</h6>
                                <ul class="list-unstyled small">
                                    <li><strong>API:</strong> FastAPI (Python)</li>
                                    <li><strong>Puerto:</strong> 8000</li>
                                    <li><strong>Base de datos:</strong> MySQL</li>
                                    <li><strong>CORS:</strong> Habilitado</li>
                                </ul>
                            </div>
                            <div class="col-md-6">
                                <h6>Frontend</h6>
                                <ul class="list-unstyled small">
                                    <li><strong>Framework:</strong> Bootstrap 5</li>
                                    <li><strong>JavaScript:</strong> ES6+</li>
                                    <li><strong>C√°mara:</strong> WebRTC API</li>
                                    <li><strong>Responsive:</strong> Mobile-first</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Funci√≥n para probar la API
        async function testAPI() {
            const results = document.getElementById('apiTestResults');
            const button = event.target;

            button.disabled = true;
            button.innerHTML = '<i class="fas fa-spinner fa-spin me-2"></i>Probando...';

            try {
                // Probar servicio Python
                const pythonResponse = await fetch('http://127.0.0.1:8000/health');
                const pythonStatus = pythonResponse.ok ? '‚úÖ Online' : '‚ùå Offline';

                // Probar API PHP
                const phpResponse = await fetch('api/biometric/get-employees-verification.php');
                const phpStatus = phpResponse.ok ? '‚úÖ Online' : '‚ùå Offline';

                // Mostrar resultados
                alert(`Resultados de la prueba:

üîß Servicio Python: ${pythonStatus}
üåê API PHP: ${phpStatus}

${pythonResponse.ok && phpResponse.ok ?
    'üéâ ¬°Todo est√° funcionando correctamente!' :
    '‚ö†Ô∏è Algunos servicios necesitan atenci√≥n.'}`);

            } catch (error) {
                alert('‚ùå Error al probar los servicios:\n' + error.message);
            } finally {
                button.disabled = false;
                button.innerHTML = '<i class="fas fa-flask me-2"></i>Probar API';
            }
        }

        // Verificar estado de servicios al cargar
        document.addEventListener('DOMContentLoaded', function() {
            checkServicesStatus();
        });

        async function checkServicesStatus() {
            try {
                // Verificar Python service
                const pythonResponse = await fetch('http://127.0.0.1:8000/health').catch(() => null);
                const pythonIndicator = document.querySelector('.status-indicator');
                const pythonStatus = document.querySelector('strong');

                if (pythonResponse && pythonResponse.ok) {
                    pythonIndicator.className = 'status-indicator status-online';
                    pythonStatus.className = 'text-success';
                    pythonStatus.textContent = 'Online';
                } else {
                    pythonIndicator.className = 'status-indicator status-offline';
                    pythonStatus.className = 'text-danger';
                    pythonStatus.textContent = 'Offline';
                }
            } catch (error) {
                console.log('Error checking services:', error);
            }
        }
    </script>
</body>
</html>
